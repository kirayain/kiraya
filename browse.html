<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kiraya | Browse New Rentals</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f7f9fb; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-thumb { background-color: #1d4ed8; border-radius: 10px; }
        .scroll-animate {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .scroll-animate.show { opacity: 1; transform: translateY(0); }
    </style>
</head>
<body class="min-h-screen">

    <!-- Header -->
    <header class="bg-white shadow-lg sticky top-0 z-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <div class="text-3xl font-extrabold text-blue-700 tracking-tight">Kiraya</div>
            <nav class="hidden md:flex space-x-6 text-gray-600 font-medium">
                <a href="index.html" class="hover:text-amber-500 transition duration-150">Back to Home</a>
                <a href="#" class="text-blue-700 font-bold border-b-2 border-blue-700 pb-1">Browse Rentals</a>
            </nav>
            <button id="mobile-menu-button" class="md:hidden text-gray-600 hover:text-blue-700 p-1">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </div>
        <div id="mobile-menu" class="hidden md:hidden border-t border-gray-100 pb-2">
            <a href="index.html" class="block py-2 px-4 text-sm text-gray-700 hover:bg-gray-50 hover:text-amber-500">Back to Home</a>
            <a href="#" class="block py-2 px-4 text-sm text-blue-700 font-bold bg-blue-50/50">Browse Rentals</a>
        </div>
    </header>

    <!-- Main -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
        <div class="text-center mb-10 md:mb-16">
            <h1 class="text-4xl sm:text-5xl font-extrabold text-gray-900 mb-3">Discover Fresh Listings</h1>
            <p class="text-base sm:text-xl text-gray-500 max-w-2xl mx-auto px-2">
                Cars, bikes, gadgets, and games added daily. Find the perfect rental near you!
            </p>
            <div class="mt-8 max-w-lg mx-auto">
                <div class="relative">
                    <input type="text" id="search-input" placeholder="Search by item, owner, or location..."
                           class="w-full pl-12 pr-4 py-4 border-2 border-gray-300 rounded-xl focus:ring-blue-500 focus:border-blue-500 shadow-lg transition text-lg">
                    <div class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    </div>
                </div>
            </div>
        </div>

        <!-- Category Filters -->
        <div class="flex flex-wrap justify-center gap-2 sm:gap-3 mb-10">
            <button class="category-btn px-3 py-2 text-sm font-semibold rounded-full bg-blue-700 text-white shadow-md hover:bg-blue-800 active" data-category="All">All Items</button>
            <button class="category-btn px-3 py-2 text-sm font-semibold rounded-full bg-white text-gray-700 border border-gray-300 shadow-sm hover:border-blue-700" data-category="Vehicles">Vehicles</button>
            <button class="category-btn px-3 py-2 text-sm font-semibold rounded-full bg-white text-gray-700 border border-gray-300 shadow-sm hover:border-blue-700" data-category="Electronics">Electronics</button>
            <button class="category-btn px-3 py-2 text-sm font-semibold rounded-full bg-white text-gray-700 border border-gray-300 shadow-sm hover:border-blue-700" data-category="Games">Games & Hobbies</button>
            <button class="category-btn px-3 py-2 text-sm font-semibold rounded-full bg-white text-gray-700 border border-gray-300 shadow-sm hover:border-blue-700" data-category="Other">Other</button>
        </div>

        <!-- Grid -->
        <section id="rental-listings" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
            <!-- JS injects cards here -->
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 text-center text-gray-400">
            &copy; 2025 Kiraya. Renting made easy in India.
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const rentalListings = document.getElementById('rental-listings');
            const categoryButtons = document.querySelectorAll('.category-btn');
            const searchInput = document.getElementById('search-input');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            // Category Mapping
            const categoryMap = {
                car: 'Vehicles', bike: 'Vehicles', house: 'Other',
                games: 'Games', consoles: 'Electronics', books: 'Other', other: 'Other'
            };

            // Load & Render
            const loadListings = () => {
                let listings = JSON.parse(localStorage.getItem('kirayaListings')) || [];
                const oneWeekAgo = Date.now() - (7 * 24 * 60 * 60 * 1000);
                listings = listings.filter(item => item.timestamp >= oneWeekAgo);
                localStorage.setItem('kirayaListings', JSON.stringify(listings));
                renderListings(listings);
            };

            const renderListings = (listings) => {
                rentalListings.innerHTML = '';

                if (listings.length === 0) {
                    rentalListings.innerHTML = `
                        <div class="col-span-full text-center p-10 bg-white rounded-xl shadow-lg">
                            <p class="text-xl text-gray-600 font-semibold">No rentals available right now.</p>
                            <p class="text-sm text-gray-400 mt-2">Check back soon!</p>
                        </div>`;
                    return;
                }

                listings.forEach(item => {
                    const category = categoryMap[item.type] || 'Other';
                    const card = document.createElement('div');
                    card.className = 'rental-card scroll-animate bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition';
                    card.setAttribute('data-category', category);
                    card.setAttribute('data-search', `${item.name} ${item.ownerName} ${item.city} ${item.description}`.toLowerCase());

                    card.innerHTML = `
                        <img src="${item.image}" alt="${item.name}" class="w-full h-48 object-cover">
                        <div class="p-5 space-y-3">
                            <h3 class="text-lg font-bold text-gray-900 truncate">${item.name}</h3>
                            <p class="text-sm text-blue-600 font-medium">${category}</p>

                            <div class="text-sm text-gray-700 space-y-1">
                                <p><strong>Owner:</strong> ${item.ownerName}</p>
                                <p><strong>Phone:</strong> <a href="tel:${item.ownerPhone}" class="text-blue-600 hover:underline">${item.ownerPhone}</a></p>
                                <p><strong>Email:</strong> <a href="mailto:${item.ownerEmail}" class="text-blue-600 hover:underline">${item.ownerEmail}</a></p>
                                <p><strong>Location:</strong> ${item.city}, ${item.pincode}</p>
                            </div>

                            <p class="text-sm text-gray-600 line-clamp-2">${item.description}</p>

                            <div class="flex justify-between items-center pt-2 border-t">
                                <p class="text-xl font-bold text-blue-700">â‚¹${item.price}<span class="text-sm font-normal text-gray-500">/day</span></p>
                                <p class="text-xs text-gray-400">Listed: ${new Date(item.timestamp).toLocaleDateString()}</p>
                            </div>
                        </div>
                    `;

                    rentalListings.appendChild(card);
                });

                setupScrollAnimation();
            };

            // Scroll Animation
            const setupScrollAnimation = () => {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            setTimeout(() => entry.target.classList.add('show'), 50);
                            observer.unobserve(entry.target);
                        }
                    });
                }, { threshold: 0.1 });

                document.querySelectorAll('.rental-card').forEach(card => {
                    card.classList.add('scroll-animate');
                    observer.observe(card);
                });
            };

            // Category Filter
            categoryButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const category = btn.getAttribute('data-category');
                    categoryButtons.forEach(b => {
                        b.classList.remove('bg-blue-700', 'text-white', 'hover:bg-blue-800', 'active');
                        b.classList.add('bg-white', 'text-gray-700', 'border', 'border-gray-300');
                    });
                    btn.classList.add('bg-blue-700', 'text-white', 'hover:bg-blue-800', 'active');
                    btn.classList.remove('bg-white', 'text-gray-700', 'border');

                    const all = JSON.parse(localStorage.getItem('kirayaListings')) || [];
                    const filtered = category === 'All'
                        ? all
                        : all.filter(i => categoryMap[i.type] === category);

                    renderListings(filtered.filter(i => i.timestamp >= Date.now() - (7*24*60*60*1000)));
                });
            });

            // Search
            searchInput.addEventListener('input', () => {
                const query = searchInput.value.toLowerCase();
                document.querySelectorAll('.rental-card').forEach(card => {
                    const text = card.getAttribute('data-search');
                    card.style.display = text.includes(query) ? 'block' : 'none';
                });
                setTimeout(setupScrollAnimation, 100);
            });

            // Mobile Menu
            mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));

            // Initial Load
            loadListings();
        });
    </script>
</body>
</html>
